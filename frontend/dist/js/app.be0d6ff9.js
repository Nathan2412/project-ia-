(()=>{"use strict";var e={894:(e,s,t)=>{var r=t(751),i=t(641),n=t(33);const a={id:"app"},o={class:"navbar navbar-expand-lg navbar-light bg-white"},l={class:"container"},c={class:"collapse navbar-collapse",id:"navbarNav"},d={class:"navbar-nav me-auto"},u={class:"nav-item"},m={key:0,class:"nav-item"},p={key:1,class:"nav-item"},g={class:"d-flex"},v={key:0,class:"d-flex align-items-center"},k={class:"me-3"},h={class:"app-container"};function f(e,s,t,r,f,y){const b=(0,i.g2)("router-link"),L=(0,i.g2)("router-view"),_=(0,i.g2)("NotificationSystem");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("nav",o,[(0,i.Lk)("div",l,[(0,i.bF)(b,{class:"navbar-brand",to:"/"},{default:(0,i.k6)(()=>s[1]||(s[1]=[(0,i.eW)("WhatToWatch",-1)])),_:1,__:[1]}),s[6]||(s[6]=(0,i.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[(0,i.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,i.Lk)("div",c,[(0,i.Lk)("ul",d,[(0,i.Lk)("li",u,[(0,i.bF)(b,{class:"nav-link",to:"/"},{default:(0,i.k6)(()=>s[2]||(s[2]=[(0,i.eW)("Accueil",-1)])),_:1,__:[2]})]),y.isLoggedIn?((0,i.uX)(),(0,i.CE)("li",m,[(0,i.bF)(b,{class:"nav-link",to:"/recommendations"},{default:(0,i.k6)(()=>s[3]||(s[3]=[(0,i.eW)("Recommandations",-1)])),_:1,__:[3]})])):(0,i.Q3)("",!0),y.isLoggedIn?((0,i.uX)(),(0,i.CE)("li",p,[(0,i.bF)(b,{class:"nav-link",to:"/profile"},{default:(0,i.k6)(()=>s[4]||(s[4]=[(0,i.eW)("Mon profil",-1)])),_:1,__:[4]})])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",g,[y.isLoggedIn?((0,i.uX)(),(0,i.CE)("div",v,[(0,i.Lk)("span",k,"Bienvenue, "+(0,n.v_)(y.currentUser.name),1),(0,i.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>y.logout&&y.logout(...e)),class:"btn btn-outline-danger"},"Déconnexion")])):((0,i.uX)(),(0,i.Wv)(b,{key:1,to:"/login",class:"btn btn-primary"},{default:(0,i.k6)(()=>s[5]||(s[5]=[(0,i.eW)("Connexion",-1)])),_:1,__:[5]}))])])])]),(0,i.Lk)("div",h,[(0,i.bF)(L)]),(0,i.bF)(_,{ref:"notifications"},null,512),s[7]||(s[7]=(0,i.Lk)("footer",{class:"bg-light py-4 mt-5"},[(0,i.Lk)("div",{class:"container text-center"},[(0,i.Lk)("p",null,"© 2025 FilmRecommender - Système de recommandation de films et séries")])],-1))])}const y={class:"notification-wrapper"},b={class:"notification-content"},L=["onClick"];function _(e,s,t,a,o,l){return(0,i.uX)(),(0,i.CE)("div",y,[(0,i.bF)(r.F,{name:"notification"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.notifications,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:(0,n.C4)(["notification",[e.type]])},[(0,i.Lk)("div",b,(0,n.v_)(e.message),1),(0,i.Lk)("button",{class:"notification-close",onClick:s=>l.removeNotification(e.id)}," × ",8,L)],2))),128))]),_:1})])}const C={name:"NotificationSystem",data(){return{notifications:[],nextId:1}},methods:{addNotification(e,s="info",t=5e3){const r=this.nextId++,i={id:r,message:e,type:s};return this.notifications.push(i),0!==t&&setTimeout(()=>{this.removeNotification(r)},t),r},removeNotification(e){const s=this.notifications.findIndex(s=>s.id===e);-1!==s&&this.notifications.splice(s,1)},success(e,s=5e3){return this.addNotification(e,"success",s)},error(e,s=5e3){return this.addNotification(e,"error",s)},info(e,s=5e3){return this.addNotification(e,"info",s)},warning(e,s=5e3){return this.addNotification(e,"warning",s)}}};var w=t(262);const E=(0,w.A)(C,[["render",_],["__scopeId","data-v-bde9320c"]]),U=E,$={name:"App",components:{NotificationSystem:U},computed:{isLoggedIn(){return null!==this.$store.state.currentUser},currentUser(){return this.$store.state.currentUser||{}}},methods:{logout(){this.$store.commit("setCurrentUser",null),this.$router.push("/login"),this.$refs.notifications.success("Vous avez été déconnecté avec succès.")},notify(e,s="info",t=5e3){return this.$refs.notifications.addNotification(e,s,t)}},provide(){return{notify:this.notify}}},x=(0,w.A)($,[["render",f]]),X=x;var S=t(220);const I={class:"home"},A={class:"hero-section py-5 text-center"};function P(e,s,t,r,n,a){const o=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",I,[(0,i.Lk)("div",A,[s[2]||(s[2]=(0,i.Lk)("h1",{class:"display-4 mb-3"},"Système de Recommandation de Films et Séries",-1)),s[3]||(s[3]=(0,i.Lk)("p",{class:"lead mb-4"},"Découvrez des films et séries parfaitement adaptés à vos goûts",-1)),a.isLoggedIn?((0,i.uX)(),(0,i.Wv)(o,{key:1,to:"/recommendations",class:"btn btn-primary btn-lg"},{default:(0,i.k6)(()=>s[1]||(s[1]=[(0,i.eW)("Voir mes recommandations",-1)])),_:1,__:[1]})):((0,i.uX)(),(0,i.Wv)(o,{key:0,to:"/login",class:"btn btn-primary btn-lg"},{default:(0,i.k6)(()=>s[0]||(s[0]=[(0,i.eW)("Commencer",-1)])),_:1,__:[0]}))]),s[4]||(s[4]=(0,i.Fv)('<div class="row mt-5"><div class="col-md-4"><div class="card h-100"><div class="card-body"><h5 class="card-title">Recommandations Personnalisées</h5><p class="card-text">Notre système analyse vos préférences pour vous recommander des films et séries qui vous correspondent.</p></div></div></div><div class="col-md-4"><div class="card h-100"><div class="card-body"><h5 class="card-title">Recherche par Service de Streaming</h5><p class="card-text">Filtrez les recommandations selon les plateformes auxquelles vous êtes abonné(e).</p></div></div></div><div class="col-md-4"><div class="card h-100"><div class="card-body"><h5 class="card-title">Profil Personnalisable</h5><p class="card-text">Mettez à jour vos préférences à tout moment pour affiner les recommandations.</p></div></div></div></div>',1))])}const F={name:"HomeView",computed:{isLoggedIn(){return null!==this.$store.state.currentUser}}},j=(0,w.A)(F,[["render",P]]),N=j,R={class:"login"},T={class:"row justify-content-center"},q={class:"col-md-6"},G={class:"card"},O={class:"card-header"},W={class:"nav nav-tabs card-header-tabs"},D={class:"nav-item"},H={class:"nav-item"},K={class:"card-body"},M={key:0},V={key:0,class:"loading-spinner"},J={key:1,class:"text-center py-3"},Q={key:2},z={class:"list-group mb-4"},B=["onClick"],Y={key:1},Z={class:"form-group mb-3"},ee={class:"form-group mb-3"},se={key:0,class:"text-center py-2"},te={key:1,class:"d-flex flex-wrap"},re=["onClick"],ie={class:"form-group mb-3"},ne={key:0,class:"text-center py-2"},ae={key:1,class:"d-flex flex-wrap"},oe=["onClick"],le={class:"form-group mb-3"},ce={class:"form-group mb-3"},de={class:"form-group mb-3"},ue={class:"text-center"},me={class:"form-group mb-3"},pe={key:0,class:"text-center py-2"},ge={key:1,class:"d-flex flex-wrap"},ve=["onClick"],ke={class:"d-grid gap-2"},he=["disabled"],fe={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ye={key:2,class:"alert alert-danger mt-3"};function be(e,s,t,a,o,l){return(0,i.uX)(),(0,i.CE)("div",R,[(0,i.Lk)("div",T,[(0,i.Lk)("div",q,[(0,i.Lk)("div",G,[(0,i.Lk)("div",O,[(0,i.Lk)("ul",W,[(0,i.Lk)("li",D,[(0,i.Lk)("a",{class:(0,n.C4)(["nav-link",{active:!o.showCreateAccount}]),onClick:s[0]||(s[0]=(0,r.D$)(e=>o.showCreateAccount=!1,["prevent"]))}," Connexion ",2)]),(0,i.Lk)("li",H,[(0,i.Lk)("a",{class:(0,n.C4)(["nav-link",{active:o.showCreateAccount}]),onClick:s[1]||(s[1]=(0,r.D$)(e=>o.showCreateAccount=!0,["prevent"]))}," Créer un compte ",2)])])]),(0,i.Lk)("div",K,[o.showCreateAccount?((0,i.uX)(),(0,i.CE)("div",Y,[s[22]||(s[22]=(0,i.Lk)("h5",{class:"card-title mb-4"},"Créer un nouveau profil",-1)),(0,i.Lk)("form",{onSubmit:s[7]||(s[7]=(0,r.D$)((...e)=>l.createNewUser&&l.createNewUser(...e),["prevent"]))},[(0,i.Lk)("div",Z,[s[11]||(s[11]=(0,i.Lk)("label",{for:"name"},"Nom",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":s[3]||(s[3]=e=>o.newUser.name=e),required:""},null,512),[[r.Jo,o.newUser.name]])]),(0,i.Lk)("div",ee,[s[13]||(s[13]=(0,i.Lk)("label",null,"Genres que vous aimez",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",se,s[12]||(s[12]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",te,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.genres,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleGenre(e,"likes"),class:(0,n.C4)(["tag",{"tag-primary":o.newUser.genres_likes.includes(e)}])},(0,n.v_)(e),11,re))),128))]))]),(0,i.Lk)("div",ie,[s[15]||(s[15]=(0,i.Lk)("label",null,"Genres que vous n'aimez pas",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",ne,s[14]||(s[14]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",ae,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.genres,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleGenre(e,"dislikes"),class:(0,n.C4)(["tag",{"tag-secondary":o.newUser.genres_dislikes.includes(e)}])},(0,n.v_)(e),11,oe))),128))]))]),(0,i.Lk)("div",le,[s[16]||(s[16]=(0,i.Lk)("label",{for:"keywords"},"Mots-clés d'intérêt (séparés par des virgules)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"keywords","onUpdate:modelValue":s[4]||(s[4]=e=>o.keywordsInput=e)},null,512),[[r.Jo,o.keywordsInput]])]),(0,i.Lk)("div",ce,[s[17]||(s[17]=(0,i.Lk)("label",{for:"directors"},"Réalisateurs/créateurs que vous appréciez (séparés par des virgules)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control",id:"directors","onUpdate:modelValue":s[5]||(s[5]=e=>o.directorsInput=e)},null,512),[[r.Jo,o.directorsInput]])]),(0,i.Lk)("div",de,[s[18]||(s[18]=(0,i.Lk)("label",{for:"rating"},"Note minimale (1-10)",-1)),(0,i.bo)((0,i.Lk)("input",{type:"range",class:"form-range",min:"1",max:"10",step:"0.5",id:"rating","onUpdate:modelValue":s[6]||(s[6]=e=>o.newUser.rating_min=e)},null,512),[[r.Jo,o.newUser.rating_min,void 0,{number:!0}]]),(0,i.Lk)("div",ue,(0,n.v_)(o.newUser.rating_min),1)]),(0,i.Lk)("div",me,[s[20]||(s[20]=(0,i.Lk)("label",null,"Services de streaming auxquels vous êtes abonné(e)",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",pe,s[19]||(s[19]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",ge,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.streamingServices,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleService(e),class:(0,n.C4)(["tag",{"tag-primary":o.newUser.streaming_services.includes(e)}])},(0,n.v_)(e.charAt(0).toUpperCase()+e.slice(1)),11,ve))),128))]))]),(0,i.Lk)("div",ke,[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.$store.state.isLoading},[e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("span",fe)):(0,i.Q3)("",!0),s[21]||(s[21]=(0,i.eW)(" Créer mon profil ",-1))],8,he)])],32)])):((0,i.uX)(),(0,i.CE)("div",M,[s[10]||(s[10]=(0,i.Lk)("h5",{class:"card-title mb-4"},"Se connecter avec un profil existant",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",V,s[8]||(s[8]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Chargement...")],-1)]))):0===e.$store.state.users.length?((0,i.uX)(),(0,i.CE)("div",J,[s[9]||(s[9]=(0,i.Lk)("p",null,"Aucun utilisateur disponible.",-1)),(0,i.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>l.fetchUsers&&l.fetchUsers(...e)),class:"btn btn-outline-primary"}," Rafraîchir la liste ")])):((0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",z,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.users,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:s=>l.loginWithUser(e.id),class:"list-group-item list-group-item-action"},(0,n.v_)(e.name),9,B))),128))])]))])),e.$store.state.error?((0,i.uX)(),(0,i.CE)("div",ye,(0,n.v_)(e.$store.state.error),1)):(0,i.Q3)("",!0)])])])])])}const Le={name:"LoginPage",data(){return{showCreateAccount:!1,newUser:{name:"",genres_likes:[],genres_dislikes:[],directors_likes:[],keywords_likes:[],rating_min:7,streaming_services:[]},keywordsInput:"",directorsInput:""}},created(){this.fetchUsers(),this.fetchGenres(),this.fetchStreamingServices()},methods:{fetchUsers(){this.$store.dispatch("fetchUsers")},fetchGenres(){this.$store.dispatch("fetchGenres")},fetchStreamingServices(){this.$store.dispatch("fetchStreamingServices")},async loginWithUser(e){const s=await this.$store.dispatch("login",e);if(s){const e=this.$route.query.redirect||"/recommendations";this.$router.push(e)}},toggleGenre(e,s){"likes"===s?this.newUser.genres_likes.includes(e)?this.newUser.genres_likes=this.newUser.genres_likes.filter(s=>s!==e):(this.newUser.genres_likes.push(e),this.newUser.genres_dislikes=this.newUser.genres_dislikes.filter(s=>s!==e)):this.newUser.genres_dislikes.includes(e)?this.newUser.genres_dislikes=this.newUser.genres_dislikes.filter(s=>s!==e):(this.newUser.genres_dislikes.push(e),this.newUser.genres_likes=this.newUser.genres_likes.filter(s=>s!==e))},toggleService(e){this.newUser.streaming_services.includes(e)?this.newUser.streaming_services=this.newUser.streaming_services.filter(s=>s!==e):this.newUser.streaming_services.push(e)},async createNewUser(){this.newUser.keywords_likes=this.keywordsInput.split(",").map(e=>e.trim()).filter(e=>""!==e),this.newUser.directors_likes=this.directorsInput.split(",").map(e=>e.trim()).filter(e=>""!==e);const e=await this.$store.dispatch("createUser",this.newUser);e&&this.$router.push("/recommendations")}}},_e=(0,w.A)(Le,[["render",be]]),Ce=_e,we={class:"recommendations"},Ee={class:"card mb-4"},Ue={class:"card-body"},$e={class:"row align-items-end"},xe={class:"col-md-4"},Xe={class:"form-group"},Se={class:"col-md-4"},Ie={class:"form-group"},Ae=["value"],Pe={class:"col-md-2"},Fe={class:"form-group"},je={class:"col-md-2"},Ne={key:0,class:"text-center py-5"},Re={key:1,class:"alert alert-danger"},Te={key:2,class:"text-center py-5"},qe={key:3,class:"row"};function Ge(e,s,t,a,o,l){const c=(0,i.g2)("MovieCard");return(0,i.uX)(),(0,i.CE)("div",we,[s[13]||(s[13]=(0,i.Lk)("h2",{class:"mb-4"},"Recommandations pour vous",-1)),(0,i.Lk)("div",Ee,[(0,i.Lk)("div",Ue,[s[10]||(s[10]=(0,i.Lk)("h5",{class:"card-title"},"Filtres",-1)),(0,i.Lk)("div",$e,[(0,i.Lk)("div",xe,[(0,i.Lk)("div",Xe,[s[6]||(s[6]=(0,i.Lk)("label",null,"Type de contenu",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.filters.contentType=e),class:"form-select"},s[5]||(s[5]=[(0,i.Lk)("option",{value:"all"},"Films et Séries",-1),(0,i.Lk)("option",{value:"movies"},"Films uniquement",-1),(0,i.Lk)("option",{value:"series"},"Séries uniquement",-1)]),512),[[r.u1,o.filters.contentType]])])]),(0,i.Lk)("div",Se,[(0,i.Lk)("div",Ie,[s[8]||(s[8]=(0,i.Lk)("label",null,"Service de streaming",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.filters.streamingService=e),class:"form-select"},[s[7]||(s[7]=(0,i.Lk)("option",{value:""},"Tous les services",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.streamingServices,e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,n.v_)(e.charAt(0).toUpperCase()+e.slice(1)),9,Ae))),128))],512),[[r.u1,o.filters.streamingService]])])]),(0,i.Lk)("div",Pe,[(0,i.Lk)("div",Fe,[s[9]||(s[9]=(0,i.Lk)("label",null,"Nombre de résultats",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=e=>o.filters.n=e),min:"1",max:"20",class:"form-control"},null,512),[[r.Jo,o.filters.n,void 0,{number:!0}]])])]),(0,i.Lk)("div",je,[(0,i.Lk)("button",{onClick:s[3]||(s[3]=(...e)=>l.getRecommendations&&l.getRecommendations(...e)),class:"btn btn-primary w-100"}," Appliquer ")])])])]),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",Ne,s[11]||(s[11]=[(0,i.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,i.Lk)("span",{class:"visually-hidden"},"Chargement...")],-1),(0,i.Lk)("p",{class:"mt-3"},"Recherche de recommandations en cours...",-1)]))):e.$store.state.error?((0,i.uX)(),(0,i.CE)("div",Re,[(0,i.eW)((0,n.v_)(e.$store.state.error)+" ",1),(0,i.Lk)("button",{onClick:s[4]||(s[4]=(...e)=>l.getRecommendations&&l.getRecommendations(...e)),class:"btn btn-outline-danger btn-sm ms-2"},"Réessayer")])):0===e.$store.state.recommendations.length?((0,i.uX)(),(0,i.CE)("div",Te,s[12]||(s[12]=[(0,i.Lk)("div",{class:"alert alert-info"},[(0,i.Lk)("p",null,"Aucune recommandation trouvée avec les critères actuels."),(0,i.Lk)("p",null,"Essayez de modifier vos filtres ou vos préférences.")],-1)]))):((0,i.uX)(),(0,i.CE)("div",qe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.recommendations,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"col-md-4 mb-4"},[(0,i.bF)(c,{item:e.item,type:e.type,"streaming-services":e.streaming_services,"in-history":l.checkIfInHistory(e.item.id,e.type),onAddToHistory:s=>l.addToHistory(e.item,e.type),onShowDetails:s=>l.showItemDetails(e.item,e.type)},null,8,["item","type","streaming-services","in-history","onAddToHistory","onShowDetails"])]))),128))]))])}const Oe={class:"card movie-card h-100"},We={key:0,class:"poster-container"},De=["src","alt"],He={key:1,class:"movie-poster-placeholder card-img-top d-flex justify-content-center align-items-center bg-light"},Ke={class:"card-body d-flex flex-column"},Me={class:"movie-title"},Ve={class:"movie-info"},Je={class:"star-rating"},Qe={class:"movie-genres mb-2"},ze={key:0,class:"mb-2"},Be={class:"movie-overview flex-grow-1"},Ye={class:"mt-auto d-flex justify-content-between"},Ze={key:1,class:"text-success"};function es(e,s,t,a,o,l){return(0,i.uX)(),(0,i.CE)("div",Oe,[t.item.poster_path?((0,i.uX)(),(0,i.CE)("div",We,[(0,i.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${t.item.poster_path}`,alt:t.item.title,class:"movie-poster card-img-top"},null,8,De)])):((0,i.uX)(),(0,i.CE)("div",He,s[2]||(s[2]=[(0,i.Lk)("span",{class:"text-muted"},"Pas d'image disponible",-1)]))),(0,i.Lk)("div",Ke,[(0,i.Lk)("h5",Me,(0,n.v_)(t.item.title),1),(0,i.Lk)("div",Ve,[(0,i.Lk)("span",null,(0,n.v_)(t.item.year),1),(0,i.Lk)("span",null,[(0,i.eW)((0,n.v_)("movie"===t.type?"Film":"Série")+" • ",1),(0,i.Lk)("span",Je,[s[3]||(s[3]=(0,i.Lk)("i",{class:"fas fa-star"},null,-1)),(0,i.eW)(" "+(0,n.v_)(t.item.rating.toFixed(1)),1)])])]),(0,i.Lk)("p",Qe,[(0,i.Lk)("small",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.item.genre,(e,s)=>((0,i.uX)(),(0,i.CE)("span",{key:e},(0,n.v_)(e)+(0,n.v_)(s<t.item.genre.length-1?", ":""),1))),128))])]),t.streamingServices&&t.streamingServices.length>0?((0,i.uX)(),(0,i.CE)("div",ze,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.streamingServices,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"service-badge"},(0,n.v_)(e.charAt(0).toUpperCase()+e.slice(1)),1))),128))])):(0,i.Q3)("",!0),(0,i.Lk)("p",Be,(0,n.v_)(l.truncateOverview(t.item.overview)),1),(0,i.Lk)("div",Ye,[t.inHistory?((0,i.uX)(),(0,i.CE)("span",Ze,s[4]||(s[4]=[(0,i.Lk)("i",{class:"fas fa-check"},null,-1),(0,i.eW)(" Dans votre historique ",-1)]))):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>l.addToHistory&&l.addToHistory(...e)),class:"btn btn-sm btn-outline-primary"}," Ajouter à mon historique ")),(0,i.Lk)("a",{href:"#",onClick:s[1]||(s[1]=(0,r.D$)((...e)=>l.showDetails&&l.showDetails(...e),["prevent"])),class:"btn btn-sm btn-link"}," Plus de détails ")])])])}const ss={name:"MovieCard",props:{item:{type:Object,required:!0},type:{type:String,default:"movie"},streamingServices:{type:Array,default:()=>[]},inHistory:{type:Boolean,default:!1}},methods:{truncateOverview(e){return e?e.length>100?e.substring(0,100)+"...":e:""},addToHistory(){this.$emit("add-to-history",{id:this.item.id,title:this.item.title,poster_path:this.item.poster_path,content_type:this.type,rating:this.item.rating})},showDetails(){this.$emit("show-details",this.item)}}},ts=(0,w.A)(ss,[["render",es],["__scopeId","data-v-72121d69"]]),rs=ts,is={name:"MovieRecommendations",components:{MovieCard:rs},data(){return{filters:{contentType:"all",streamingService:"",n:10}}},created(){this.loadDependencies(),this.getRecommendations()},methods:{async loadDependencies(){await this.$store.dispatch("fetchStreamingServices")},getRecommendations(){this.$store.dispatch("fetchRecommendations",{contentType:this.filters.contentType,n:this.filters.n,streamingService:this.filters.streamingService||null})},truncateText(e,s){return e?e.length<=s?e:e.substring(0,s)+"...":""},checkIfInHistory(e,s){return!(!this.$store.state.currentUser||!this.$store.state.currentUser.watch_history)&&this.$store.state.currentUser.watch_history.some(t=>t.id===e&&t.content_type===s)},async addToHistory(e,s){try{await this.$store.dispatch("addToHistory",{id:e.id,title:e.title||e.name,poster_path:e.poster_path,content_type:s,rating:e.rating}),this.$root.$refs.notifications.success(`"${e.title||e.name}" a été ajouté à votre historique!`),setTimeout(()=>this.getRecommendations(),1e3)}catch(t){this.$root.$refs.notifications.error("Erreur lors de l'ajout à l'historique."),console.error(t)}},showItemDetails(e,s){console.log("Afficher détails pour:",e),this.$root.$refs.notifications.info(`Détails de "${e.title||e.name}" - Cette fonctionnalité sera disponible dans une prochaine version.`)}}},ns=(0,w.A)(is,[["render",Ge],["__scopeId","data-v-99342ac8"]]),as=ns,os={class:"profile"},ls={class:"user-profile mb-4"},cs={class:"mb-3"},ds={key:0,class:"edit-profile"},us={class:"form-group mb-3"},ms={key:0,class:"text-center py-2"},ps={key:1,class:"d-flex flex-wrap"},gs=["onClick"],vs={class:"form-group mb-3"},ks={key:0,class:"text-center py-2"},hs={key:1,class:"d-flex flex-wrap"},fs=["onClick"],ys={class:"form-group mb-3"},bs={class:"form-group mb-3"},Ls={class:"form-group mb-3"},_s={class:"form-label"},Cs={class:"form-group mb-3"},ws={key:0,class:"text-center py-2"},Es={key:1,class:"d-flex flex-wrap"},Us=["onClick"],$s={class:"d-flex justify-content-end mt-4"},xs=["disabled"],Xs={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Ss={key:1,class:"user-preferences"},Is={class:"row mb-3"},As={class:"col-md-8"},Ps={key:0,class:"text-muted"},Fs={class:"row mb-3"},js={class:"col-md-8"},Ns={key:0,class:"text-muted"},Rs={class:"row mb-3"},Ts={class:"col-md-8"},qs={class:"row mb-3"},Gs={class:"col-md-8"},Os={class:"row mb-3"},Ws={class:"col-md-8"},Ds={class:"row mb-3"},Hs={class:"col-md-8"},Ks={key:0,class:"text-muted"},Ms={class:"d-flex justify-content-end mt-4"};function Vs(e,s,t,a,o,l){return(0,i.uX)(),(0,i.CE)("div",os,[s[24]||(s[24]=(0,i.Lk)("h2",{class:"mb-4"},"Mon profil",-1)),(0,i.Lk)("div",ls,[(0,i.Lk)("h3",cs,(0,n.v_)(e.$store.state.currentUser.name),1),s[23]||(s[23]=(0,i.Lk)("hr",null,null,-1)),o.isEditing?((0,i.uX)(),(0,i.CE)("div",ds,[(0,i.Lk)("form",{onSubmit:s[4]||(s[4]=(0,r.D$)((...e)=>l.saveChanges&&l.saveChanges(...e),["prevent"]))},[(0,i.Lk)("div",us,[s[7]||(s[7]=(0,i.Lk)("label",{class:"form-label"},"Genres que j'aime",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",ms,s[6]||(s[6]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",ps,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.genres,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleGenre(e,"likes"),class:(0,n.C4)(["tag",{"tag-primary":o.userPrefs.genres_likes.includes(e)}])},(0,n.v_)(e),11,gs))),128))]))]),(0,i.Lk)("div",vs,[s[9]||(s[9]=(0,i.Lk)("label",{class:"form-label"},"Genres que je n'aime pas",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",ks,s[8]||(s[8]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",hs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.genres,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleGenre(e,"dislikes"),class:(0,n.C4)(["tag",{"tag-secondary":o.userPrefs.genres_dislikes.includes(e)}])},(0,n.v_)(e),11,fs))),128))]))]),(0,i.Lk)("div",ys,[s[10]||(s[10]=(0,i.Lk)("label",{class:"form-label"},"Mots-clés d'intérêt",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>o.keywordsInput=e)},null,512),[[r.Jo,o.keywordsInput]]),s[11]||(s[11]=(0,i.Lk)("small",{class:"form-text text-muted"},"Séparés par des virgules",-1))]),(0,i.Lk)("div",bs,[s[12]||(s[12]=(0,i.Lk)("label",{class:"form-label"},"Réalisateurs/créateurs préférés",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>o.directorsInput=e)},null,512),[[r.Jo,o.directorsInput]]),s[13]||(s[13]=(0,i.Lk)("small",{class:"form-text text-muted"},"Séparés par des virgules",-1))]),(0,i.Lk)("div",Ls,[(0,i.Lk)("label",_s,"Note minimale: "+(0,n.v_)(o.userPrefs.rating_min),1),(0,i.bo)((0,i.Lk)("input",{type:"range",class:"form-range",min:"1",max:"10",step:"0.5","onUpdate:modelValue":s[2]||(s[2]=e=>o.userPrefs.rating_min=e)},null,512),[[r.Jo,o.userPrefs.rating_min,void 0,{number:!0}]])]),(0,i.Lk)("div",Cs,[s[15]||(s[15]=(0,i.Lk)("label",{class:"form-label"},"Mes abonnements streaming",-1)),e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("div",ws,s[14]||(s[14]=[(0,i.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1)]))):((0,i.uX)(),(0,i.CE)("div",Es,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.streamingServices,e=>((0,i.uX)(),(0,i.CE)("div",{key:e,onClick:s=>l.toggleService(e),class:(0,n.C4)(["tag",{"tag-primary":o.userPrefs.streaming_services.includes(e)}])},(0,n.v_)(e.charAt(0).toUpperCase()+e.slice(1)),11,Us))),128))]))]),(0,i.Lk)("div",$s,[(0,i.Lk)("button",{type:"button",onClick:s[3]||(s[3]=(...e)=>l.cancelEdit&&l.cancelEdit(...e)),class:"btn btn-outline-secondary me-2"}," Annuler "),(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:e.$store.state.isLoading},[e.$store.state.isLoading?((0,i.uX)(),(0,i.CE)("span",Xs)):(0,i.Q3)("",!0),s[16]||(s[16]=(0,i.eW)(" Enregistrer ",-1))],8,xs)])],32)])):((0,i.uX)(),(0,i.CE)("div",Ss,[(0,i.Lk)("div",Is,[s[17]||(s[17]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Genres aimés:")],-1)),(0,i.Lk)("div",As,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.currentUser.preferences.genres_likes,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"tag tag-primary me-1 mb-1"},(0,n.v_)(e),1))),128)),e.$store.state.currentUser.preferences.genres_likes.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",Ps,"Aucun"))])]),(0,i.Lk)("div",Fs,[s[18]||(s[18]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Genres non aimés:")],-1)),(0,i.Lk)("div",js,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.currentUser.preferences.genres_dislikes,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"tag tag-secondary me-1 mb-1"},(0,n.v_)(e),1))),128)),e.$store.state.currentUser.preferences.genres_dislikes.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",Ns,"Aucun"))])]),(0,i.Lk)("div",Rs,[s[19]||(s[19]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Mots-clés d'intérêt:")],-1)),(0,i.Lk)("div",Ts,(0,n.v_)(e.$store.state.currentUser.preferences.keywords_likes.join(", ")||"Aucun"),1)]),(0,i.Lk)("div",qs,[s[20]||(s[20]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Réalisateurs/créateurs préférés:")],-1)),(0,i.Lk)("div",Gs,(0,n.v_)(e.$store.state.currentUser.preferences.directors_likes.join(", ")||"Aucun"),1)]),(0,i.Lk)("div",Os,[s[21]||(s[21]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Note minimale:")],-1)),(0,i.Lk)("div",Ws,(0,n.v_)(e.$store.state.currentUser.preferences.rating_min),1)]),(0,i.Lk)("div",Ds,[s[22]||(s[22]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Abonnements streaming:")],-1)),(0,i.Lk)("div",Hs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$store.state.currentUser.preferences.streaming_services,e=>((0,i.uX)(),(0,i.CE)("span",{key:e,class:"service-badge me-1"},(0,n.v_)(e.charAt(0).toUpperCase()+e.slice(1)),1))),128)),e.$store.state.currentUser.preferences.streaming_services.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",Ks,"Aucun"))])]),(0,i.Lk)("div",Ms,[(0,i.Lk)("button",{onClick:s[5]||(s[5]=(...e)=>l.startEditing&&l.startEditing(...e)),class:"btn btn-outline-primary"}," Modifier mes préférences ")])]))])])}const Js={name:"UserProfile",data(){return{isEditing:!1,userPrefs:{genres_likes:[],genres_dislikes:[],directors_likes:[],keywords_likes:[],rating_min:7,streaming_services:[]},keywordsInput:"",directorsInput:""}},created(){this.fetchGenres(),this.fetchStreamingServices()},methods:{fetchGenres(){this.$store.state.genres.length||this.$store.dispatch("fetchGenres")},fetchStreamingServices(){this.$store.state.streamingServices.length||this.$store.dispatch("fetchStreamingServices")},startEditing(){this.userPrefs={genres_likes:[...this.$store.state.currentUser.preferences.genres_likes||[]],genres_dislikes:[...this.$store.state.currentUser.preferences.genres_dislikes||[]],directors_likes:[...this.$store.state.currentUser.preferences.directors_likes||[]],keywords_likes:[...this.$store.state.currentUser.preferences.keywords_likes||[]],rating_min:this.$store.state.currentUser.preferences.rating_min||7,streaming_services:[...this.$store.state.currentUser.preferences.streaming_services||[]]},this.keywordsInput=this.userPrefs.keywords_likes.join(", "),this.directorsInput=this.userPrefs.directors_likes.join(", "),this.isEditing=!0},cancelEdit(){this.isEditing=!1},toggleGenre(e,s){"likes"===s?this.userPrefs.genres_likes.includes(e)?this.userPrefs.genres_likes=this.userPrefs.genres_likes.filter(s=>s!==e):(this.userPrefs.genres_likes.push(e),this.userPrefs.genres_dislikes=this.userPrefs.genres_dislikes.filter(s=>s!==e)):this.userPrefs.genres_dislikes.includes(e)?this.userPrefs.genres_dislikes=this.userPrefs.genres_dislikes.filter(s=>s!==e):(this.userPrefs.genres_dislikes.push(e),this.userPrefs.genres_likes=this.userPrefs.genres_likes.filter(s=>s!==e))},toggleService(e){this.userPrefs.streaming_services.includes(e)?this.userPrefs.streaming_services=this.userPrefs.streaming_services.filter(s=>s!==e):this.userPrefs.streaming_services.push(e)},async saveChanges(){this.userPrefs.keywords_likes=this.keywordsInput.split(",").map(e=>e.trim()).filter(e=>""!==e),this.userPrefs.directors_likes=this.directorsInput.split(",").map(e=>e.trim()).filter(e=>""!==e);const e=await this.$store.dispatch("updateUserPreferences",this.userPrefs);e&&(this.isEditing=!1)}}},Qs=(0,w.A)(Js,[["render",Vs]]),zs=Qs;var Bs=t(278),Ys=t(335);const Zs="https://whattowatch.fr/api",et=(0,Bs.y$)({state:{currentUser:JSON.parse(localStorage.getItem("user")),users:[],recommendations:[],genres:[],streamingServices:[],isLoading:!1,error:null},getters:{isLoggedIn:e=>!!e.currentUser,currentUserId:e=>e.currentUser?e.currentUser.id:null},mutations:{setCurrentUser(e,s){e.currentUser=s,s?localStorage.setItem("user",JSON.stringify(s)):localStorage.removeItem("user")},setUsers(e,s){e.users=s},setRecommendations(e,s){e.recommendations=s},setGenres(e,s){e.genres=s},setStreamingServices(e,s){e.streamingServices=s},setLoading(e,s){e.isLoading=s},setError(e,s){e.error=s},updateUserPreferences(e,s){e.currentUser&&(e.currentUser.preferences={...e.currentUser.preferences,...s},localStorage.setItem("user",JSON.stringify(e.currentUser)))}},actions:{async fetchUsers({commit:e}){e("setLoading",!0),e("setError",null);try{const s=await Ys.A.get(`${Zs}/users`);e("setUsers",s.data)}catch(s){e("setError","Erreur lors de la récupération des utilisateurs"),console.error(s)}finally{e("setLoading",!1)}},async fetchRecommendations({commit:e,state:s},{contentType:t="all",n:r=5,streamingService:i=null}){if(s.currentUser){e("setLoading",!0),e("setError",null);try{let n=`${Zs}/recommendations/${s.currentUser.id}?content_type=${t}&n=${r}`;i&&(n+=`&streaming_service=${i}`);const a=await Ys.A.get(n);e("setRecommendations",a.data)}catch(n){e("setError","Erreur lors de la récupération des recommandations"),console.error(n)}finally{e("setLoading",!1)}}},async fetchGenres({commit:e}){e("setLoading",!0),e("setError",null);try{const s=await Ys.A.get(`${Zs}/genres`);e("setGenres",s.data)}catch(s){e("setError","Erreur lors de la récupération des genres"),console.error(s)}finally{e("setLoading",!1)}},async fetchStreamingServices({commit:e}){e("setLoading",!0),e("setError",null);try{const s=await Ys.A.get(`${Zs}/services`);e("setStreamingServices",s.data)}catch(s){e("setError","Erreur lors de la récupération des services de streaming"),console.error(s)}finally{e("setLoading",!1)}},async login({commit:e,dispatch:s},t){e("setLoading",!0),e("setError",null);try{const s=await Ys.A.get(`${Zs}/users/${t}`);return e("setCurrentUser",s.data),!0}catch(r){return e("setError","Erreur lors de la connexion"),console.error(r),!1}finally{e("setLoading",!1)}},async createUser({commit:e},s){e("setLoading",!0),e("setError",null);try{const t=await Ys.A.post(`${Zs}/users`,s);return e("setCurrentUser",t.data),!0}catch(t){return e("setError","Erreur lors de la création de l'utilisateur"),console.error(t),!1}finally{e("setLoading",!1)}},async updateUserPreferences({commit:e,state:s},t){if(!s.currentUser)return!1;e("setLoading",!0),e("setError",null);try{return await Ys.A.put(`${Zs}/users/${s.currentUser.id}`,t),e("updateUserPreferences",t),!0}catch(r){return e("setError","Erreur lors de la mise à jour des préférences"),console.error(r),!1}finally{e("setLoading",!1)}},async addToHistory({state:e,commit:s},t){if(!e.currentUser)return!1;s("setLoading",!0),s("setError",null);try{if(await Ys.A.post(`${Zs}/users/${e.currentUser.id}/history`,{item:t}),e.currentUser.watch_history){const r=[...e.currentUser.watch_history,t];s("updateUserPreferences",{watch_history:r})}else s("updateUserPreferences",{watch_history:[t]});return!0}catch(r){return s("setError","Erreur lors de l'ajout à l'historique"),console.error(r),!1}finally{s("setLoading",!1)}},logout({commit:e}){e("setCurrentUser",null),e("setRecommendations",[])}}}),st=[{path:"/",name:"Home",component:N},{path:"/login",name:"Login",component:Ce,meta:{guestOnly:!0}},{path:"/recommendations",name:"Recommendations",component:as,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:zs,meta:{requiresAuth:!0}}],tt=(0,S.aE)({history:(0,S.LA)("/"),routes:st});tt.beforeEach((e,s,t)=>{const r=null!==et.state.currentUser;e.matched.some(e=>e.meta.requiresAuth)?r?t():t({path:"/login",query:{redirect:e.fullPath}}):e.matched.some(e=>e.meta.guestOnly)&&r?t({path:"/"}):t()});const rt=tt;var it=t(957);const nt=(0,r.Ef)(X);nt.use(et).use(rt).use(it.Ay).mount("#app")}},s={};function t(r){var i=s[r];if(void 0!==i)return i.exports;var n=s[r]={exports:{}};return e[r](n,n.exports,t),n.exports}t.m=e,(()=>{var e=[];t.O=(s,r,i,n)=>{if(!r){var a=1/0;for(d=0;d<e.length;d++){for(var[r,i,n]=e[d],o=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(t.O).every(e=>t.O[e](r[l]))?r.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var c=i();void 0!==c&&(s=c)}}return s}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,i,n]}})(),(()=>{t.d=(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s)})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};t.O.j=s=>0===e[s];var s=(s,r)=>{var i,n,[a,o,l]=r,c=0;if(a.some(s=>0!==e[s])){for(i in o)t.o(o,i)&&(t.m[i]=o[i]);if(l)var d=l(t)}for(s&&s(r);c<a.length;c++)n=a[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},r=self["webpackChunkwhattowatch"]=self["webpackChunkwhattowatch"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))})();var r=t.O(void 0,[504],()=>t(894));r=t.O(r)})();
//# sourceMappingURL=app.be0d6ff9.js.map